<!doctype html>
<html class="theme-dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,user-scalable=no">
<meta name="description" content="mec2-drive">
<meta name="date" content="Tue Jun 09 2020 02:00:00 GMT+0200 (Central European Summer Time)">
<meta name="keywords" content="">
<title>mec2-drive</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/github-gist.min.css">

<link rel="stylesheet" href="./theme/styles.css">
</head>
<body>
<header>
  <a href="./index.html" class="left">My Site</a>
  <a href="./about.html" class="right">About</a>
</header>
<main>
<h2 id="drives">Drives <a class="plnk" href="#drives">#</a></h2>
<p>The <code>type</code> of a constraint describes the interactions of two nodes.
Using only the <code>core</code> module the <code>type</code> can be set as <code>free</code> or <code>const</code> to allow or disallow motion respectively.
<code>mec2.drive</code> allows this <code>type</code> to be set as <code>drive</code> as well.
A constraint of <code>type</code> drive has a determined motion, which allows linkages with one degree of freedom to be fully determined.</p>
<p>Further properties can be provided to describe the motion (all angles in radiant):</p>
<ul>
<li><code>func</code>: The function used to describe the motions. Default is <code>linear</code>. A lot of other functions are implemented after <strong>VDI 2145</strong>, as well as web easing functions.</li>
<li><code>ref</code>: Use the angle of another constraints as reference.</li>
<li><code>Dw</code>: Angle of rotation. Default: <code>2 * Math.PI</code>.</li>
<li><code>t0</code>: Time in milliseconds when to start the drive, after model initialization.</li>
<li><code>Dt</code>: Time needed for one turn.</li>
<li><code>bounce</code>: Perform a reversed motion after each interval (<code>bounce</code> is issued between repetitions).</li>
<li><code>repeat</code>: Repeat the motion this many times.</li>
<li><code>args</code>: Arguments for sequential functions. Implemented in the second example.</li>
</ul>
<p>Using combinations of these properties a variety of motions can be described.</p>
<h4 id="example">Example: <a class="plnk" href="#example">#</a></h4>
<mec-2 width="300" height="300" grid cartesian>
{
    "nodes": [
        {
            "id":"A0", "x": 150, "y": 120, "base": true
        }, {
            "id":"A", "x": 150, "y": 200
        }
    ],
    "constraints": [
        {
            "id":"a","p1":"A0","p2":"A",
            "len":{"type":"const"},
            "ori":{"type":"drive","repeat":10,"Dt":3 }
        }
    ]
}  
</mec-2>
<pre><code class="code-line language-json"><div>{
    <span class="hljs-attr">"nodes"</span>: [
        {
            <span class="hljs-attr">"id"</span>:<span class="hljs-string">"A0"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">40</span>, <span class="hljs-attr">"base"</span>: <span class="hljs-literal">true</span>
        }, {
            <span class="hljs-attr">"id"</span>:<span class="hljs-string">"A"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">140</span>
        }
    ],
    <span class="hljs-attr">"constraints"</span>: [
        {
            <span class="hljs-attr">"id"</span>:<span class="hljs-string">"a"</span>,<span class="hljs-attr">"p1"</span>:<span class="hljs-string">"A0"</span>,<span class="hljs-attr">"p2"</span>:<span class="hljs-string">"A"</span>,
            <span class="hljs-attr">"len"</span>:{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"const"</span>},
            <span class="hljs-attr">"ori"</span>:{<span class="hljs-attr">"type"</span>:<span class="hljs-string">"drive"</span>,<span class="hljs-attr">"repeat"</span>:<span class="hljs-number">10</span>,<span class="hljs-attr">"Dt"</span>:<span class="hljs-number">3</span> }
        }
    ]
}  
</div></code></pre>
<h3 id="drive-sequence"><code> Drive Sequence</code> <a class="plnk" href="#drive-sequence">#</a></h3>
<p>Drive functions can be composed as a sequence (<code>'func':'seq'</code>) of normalized functions, being one of <code>['const', 'linear', 'quadratic', 'harmonic', 'sinoid', 'poly5']</code> each. Every segment of a drive sequence must specify its function type <code>func</code>, its duration <code>dt</code> (always positive) and its value range <code>dz</code> (might be negative).</p>
<mec-2 width="300" height="300" grid cartesian>
{
    "nodes": [
        {"id":"A0","x":175,"y":125,"base":true},
        {"id":"A1","x":175,"y":225}
    ],
    "constraints": [
        {
            "id": "a", "p1": "A0", "p2": "A1",
            "len": { "type": "const" },
            "ori": {
                "type": "drive",  "Dt": 3, "Dw": -3.14, "repeat":2,
                "func": "seq", "args": [
                    { "func": "quadratic", "dt": 3, "dz": 1 },
                    { "func": "const", "dt": 1 },
                    {"func": "linear", "dt": 3, "dz": -1 }
                ]
            }
        }
    ]
} 
</mec-2>
<pre><code class="code-line language-json"><div>{
    <span class="hljs-attr">"nodes"</span>: [
        {<span class="hljs-attr">"id"</span>:<span class="hljs-string">"A0"</span>,<span class="hljs-attr">"x"</span>:<span class="hljs-number">175</span>,<span class="hljs-attr">"y"</span>:<span class="hljs-number">125</span>,<span class="hljs-attr">"base"</span>:<span class="hljs-literal">true</span>},
        {<span class="hljs-attr">"id"</span>:<span class="hljs-string">"A1"</span>,<span class="hljs-attr">"x"</span>:<span class="hljs-number">175</span>,<span class="hljs-attr">"y"</span>:<span class="hljs-number">225</span>}
    ],
    <span class="hljs-attr">"constraints"</span>: [
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"a"</span>, <span class="hljs-attr">"p1"</span>: <span class="hljs-string">"A0"</span>, <span class="hljs-attr">"p2"</span>: <span class="hljs-string">"A1"</span>,
          <span class="hljs-attr">"len"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span> },
          <span class="hljs-attr">"ori"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"drive"</span>, 
          <span class="hljs-attr">"Dt"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"Dw"</span>: <span class="hljs-number">-3.14</span>, <span class="hljs-attr">"repeat"</span>:<span class="hljs-number">2</span>,
          <span class="hljs-attr">"func"</span>: <span class="hljs-string">"seq"</span>, <span class="hljs-attr">"args"</span>: [
            { <span class="hljs-attr">"func"</span>: <span class="hljs-string">"quadratic"</span>, <span class="hljs-attr">"dt"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"dz"</span>: <span class="hljs-number">1</span> },
            { <span class="hljs-attr">"func"</span>: <span class="hljs-string">"const"</span>, <span class="hljs-attr">"dt"</span>: <span class="hljs-number">1</span> },
            {<span class="hljs-attr">"func"</span>: <span class="hljs-string">"linear"</span>, <span class="hljs-attr">"dt"</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">"dz"</span>: <span class="hljs-number">-1</span> }]
        }
    }]
}
</div></code></pre>
<h3 id="drive-reference"><code> Drive reference</code> <a class="plnk" href="#drive-reference">#</a></h3>
<mec-2 width="300" height="300" grid cartesian>
{
    "nodes":[
        { "id": "A0", "x": 100, "y": 125, "base": true },
        { "id": "B", "x": 175, "y": 125 },
        { "id": "B0", "x": 250, "y": 125,"base": true },
        { "id": "A", "x": 175, "y": 125 }
    ],
    "constraints":[
        { "id": "b", "p1": "B0", "p2": "A",
          "len": { "type": "const" },
          "ori": { "type": "drive", "repeat":3 }
        },
        { "id": "c", "p1": "A0", "p2": "B",
          "len": {"type": "const" },
          "ori": { "type": "const", "ref":"b"}
        }
    ]
}
</mec-2>
<pre><code class="code-line language-json"><div>{
    <span class="hljs-attr">"nodes"</span>:[
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"A0"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span>, <span class="hljs-attr">"base"</span>: <span class="hljs-literal">true</span> },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"B"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">175</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span> },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"B0"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">250</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span>,<span class="hljs-attr">"base"</span>: <span class="hljs-literal">true</span> },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"A"</span>, <span class="hljs-attr">"x"</span>: <span class="hljs-number">175</span>, <span class="hljs-attr">"y"</span>: <span class="hljs-number">125</span> }
    ],
    <span class="hljs-attr">"constraints"</span>:[
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"b"</span>, <span class="hljs-attr">"p1"</span>: <span class="hljs-string">"B0"</span>, <span class="hljs-attr">"p2"</span>: <span class="hljs-string">"A"</span>,
          <span class="hljs-attr">"len"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span> },
          <span class="hljs-attr">"ori"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"drive"</span>, <span class="hljs-attr">"repeat"</span>:<span class="hljs-number">3</span> }
        },
        { <span class="hljs-attr">"id"</span>: <span class="hljs-string">"c"</span>, <span class="hljs-attr">"p1"</span>: <span class="hljs-string">"A0"</span>, <span class="hljs-attr">"p2"</span>: <span class="hljs-string">"B"</span>,
          <span class="hljs-attr">"len"</span>: {<span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span> },
          <span class="hljs-attr">"ori"</span>: { <span class="hljs-attr">"type"</span>: <span class="hljs-string">"const"</span>, <span class="hljs-attr">"ref"</span>:<span class="hljs-string">"b"</span>}
        }
    ]
}
</div></code></pre>

</main>
<script src="./js/g2.html.js"></script>
<script src="./js/mec2.html.js"></script>
<footer>
  <span class="left">&copy; My Site</span>
  <span class="center">powered by &mu;JAM &amp; VSCode &mdash; hosted by GitHub</span>
  <span class="right" onclick="document.documentElement.className = document.documentElement.className === 'theme-dark' ? 'theme-light' : 'theme-dark';">&#9788;</span>
</footer>
</body>
</html>